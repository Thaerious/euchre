import threading
import socket

class MockServer:
    def __init__(this):
        names = ["Adam", "T100", "Skynet", "Robocop"]
        random.shuffle(names)
        this.euchre = Euchre(names)
        this.game = Game(this.euchre)
        this.agents = {}        

    def start(this):
        host = socket.gethostname()
        port = 2001
        serverSocket = socket.socket()
        serverSocket.bind((host, port))

        conn, address = server_socket.accept()
        print("Connection from: " + str(address))



    def addAgent(this, name, agent):
        this.agents[name] = agent
        agentPlayer = this.euchre.players.getPlayer(name)
        snap = Snapshot(this.game, agentPlayer)
        agent.update(snap)

    def input(this, name, action, data):
        player = this.euchre.players.getPlayer(name)
        this.game.input(player, action, data)

        for name, agent in this.agents.items():
            agentPlayer = this.euchre.players.getPlayer(name)
            snap = Snapshot(this.game, agentPlayer)
            agent.update(snap)